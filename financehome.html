<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bill-Discounting &mdash;  Bootstrap Website Template</title>
  <meta name="description" content="Free Bootstrap Theme by uicookies.com">
  <meta name="keywords" content="free website templates, free bootstrap themes, free template, free bootstrap, free website template">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="css/styles-merged.css">
  <link rel="stylesheet" href="css/style.min.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500" rel="stylesheet">

  <!--[if lt IE 9]>
      <script src="js/vendor/html5shiv.min.js"></script>
      <script src="js/vendor/respond.min.js"></script>
    <![endif]-->
  <style>
    .finance-table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
      border: none;
    }
    tr:hover{
      background-color: #ffa;

    }
  </style>
</head>

<body>



  <!-- START: header -->
  <header role="banner" class="probootstrap-header">
    <div class="container-fluid">
      <!-- <div class="row"> -->
      <a href="index.html" class="probootstrap-logo">
        <img src="img/nelito.jpeg" alt="Nelito" height="30" width="70">
        <span></span>
      </a>

      <a href="#" class="probootstrap-burger-menu visible-xs">
        <i>Menu</i>
      </a>
      <div class="mobile-menu-overlay"></div>

      <nav role="navigation" class="probootstrap-nav hidden-xs">
        <ul class="probootstrap-main-nav">
          <li>
            <a href="index.html">Home</a>
          </li>
          <li>
            <a href="blog.html">Blog</a>
          </li>
          <!-- <li><a href="pricing.html">Pricing</a></li>-->
          <li>
            <a href="tour.html">About</a>
          </li>
          <!-- <li><a href="login.html">Log in</a></li>-->
            <li class="probootstrap-cta"><a href="#">Hello ,Investor</a></li>
        </ul>
        <div class="extra-text visible-xs">
          <a href="#" class="probootstrap-burger-menu">
            <i>Menu</i>
          </a>
          <h5>Social</h5>
          <ul class="social-buttons">
            <li>
              <a href="#">
                <i class="icon-twitter"></i>
              </a>
            </li>
            <li>
              <a href="#">
                <i class="icon-facebook"></i>
              </a>
            </li>
            <li>
              <a href="#">
                <i class="icon-instagram2"></i>
              </a>
            </li>
          </ul>
          <p>
            <small>&copy; Copyright 2017. All Rights Reserved.</small>
          </p>
        </div>
      </nav>

      <section class="probootstrap-intro">
        <div class="container">

          <div class="row">
            <div class="col-md-6 col-md-offset-3" id="showtable">
              <div class="probootstrap-form probootstrap-form-box" style="width: 900px;margin-left: -140px;box-shadow: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);">
              <span style="margin-top:-20px ;font-family: 'Times New Roman', Times, serif;font-weight: 90px;color: 	#1F75FE;font-size: 30px">Invoice Details</span>
                <table id="finance-table"  style="font-family: arial, sans-serif;border: none;width: 100%;" cellspacing="0" cellpadding="0">
                <tr>
                  <!-- <th style="border: 1px solid #dddddd;text-align: left;padding: 8px;background-color: #dddddd;color:black">Sr No</th> -->
                  <th style="border: 1px solid #dddddd;text-align: left;padding: 8px;background-color: #dddddd;color:black">Invoice ID</th>
                  <th style="border: 1px solid #dddddd;text-align: left;padding: 8px;background-color: #dddddd;color:black">Status</th>
                  <th style="border: 1px solid #dddddd;text-align: left;padding: 8px;background-color: #dddddd;color:black">Details</th>
                  <th style="border: 1px solid #dddddd;text-align: left;padding: 8px;background-color: #dddddd;color:black" id="shwcheks">CheckIn</th>
                </tr>
                <tbody>
                  <!-- <tr>
                              <td style="border: 1px solid #dddddd;text-align: left;padding: 8px;color:white" >1</td>
                              <td style="border: 1px solid #dddddd;text-align: left;padding: 8px;color:white" id="invoiceid">  
                                 <div id="ps">
                                      <p>Total amount : 1000</p>
                                      <p>Goods : Frames</p>
                                  </div> 
                                
                              </td>
                              <td style="border: 1px solid #dddddd;text-align: left;padding: 8px;color:white" id="showstatus"></td>
                              <td style="border: 1px solid #dddddd;text-align: left;padding: 8px;color:white" id=""><a  href="financedetails.html" role="button" class="btn" style="color: darkgreen">See here...</a></td>                            
                              <td style="border: 1px solid #dddddd;text-align: left;padding: 8px;color:white" id="showbtnfnce"><button id="finceRels" style="color: black">Finance Released</button></td> 
                            </tr> -->
                </tbody>
              </table>

            </div>
            </div>
          </div>


        </div>



        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>

              </div>
              <div class="modal-body">
                <p style="size: 18px">
                  <b>Invoice details uploaded Sucessfully !!!</b>
                </p>
              </div>
              <div class="modal-footer">
                <a role="button" href="sellarhome.html" class="btn btn-primary" id="okbutton">Ok</a>
              </div>
            </div>

          </div>
        </div>

      </section>

      <!-- </div> -->
    </div>


  </header>

  <!-- END: header -->

  <!-- START: footer -->
  <footer role="contentinfo" class="probootstrap-footer">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="probootstrap-footer-widget">
            <h3>About</h3>
            <p>Bill discounting is an arrangement whereby the seller recovers an amount of sales bill from the financial intermediaries before it is due. Such intermediaries charge a fee for the service. 
              From the other side, it is a business vertical for all types of financial intermediaries .</p>
            <p>
              <a href="#" class="link-with-icon">Learn More
                <i class=" icon-chevron-right"></i>
              </a>
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="probootstrap-footer-widget">
            <h3>Blog</h3>
            <ul class="probootstrap-blog-list">
              <li>
                <a href="#">
                  <figure>
                    <img src="img/br.png" alt="Free Bootstrap Template by uicookies.com" class="img-responsive">
                  </figure>
                  <div class="text">
                    <h4>what is invoice?</h4>
                    <p>A small river named Duden flows by their place</p>
                  </div>
                </a>
              </li>
              <li>
                <a href="#">
                  <figure>
                    <img src="img/sr.png" alt="Free Bootstrap Template by uicookies.com" class="img-responsive">
                  </figure>
                  <div class="text">
                    <h4>Services</h4>
                    <p>A small river named Duden flows by their place</p>
                  </div>
                </a>
              </li>
              <li>
                <a href="#">
                  <figure>
                    <img src="img/fn.png" alt="Free Bootstrap Template by uicookies.com" class="img-responsive">
                  </figure>
                  <div class="text">
                    <h4>how to do transaction ?</h4>
                    <p>A small river named Duden flows by their place</p>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-4">
          <div class="probootstrap-footer-widget">
            <h3>Contact</h3>
            <ul class="probootstrap-contact-info">
              <li>
                <i class="icon-location2"></i>
                <span>MBP, Mahape,navi mumbai, maharashtra</span>
              </li>
              <li>
                <i class="icon-mail"></i>
                <span>info@nelito.com</span>
              </li>
              <li>
                <i class="icon-phone2"></i>
                <span>+123 456 7890</span>
              </li>
            </ul>

          </div>
        </div>
      </div>
      <!--<div class=amount"row mt40">
        <div class="camountol-md-12 text-center">
          <ul class="amountprobootstrap-footer-social">
            <li><a hramountef=""><i class="icon-twitter"></i></a></li>
            <li><a hramountef=""><i class="icon-facebook"></i></a></li>
            <li><a hramountef=""><i class="icon-instagram2"></i></a></li>
          </ul>amount
          <p>amount
            <small>&camountopy; 2017 <a href="https://uicookies.com/" target="_blank">uiCookies:Sublime</a>. All Rights Reserved. <br> Designed &amp; Developed by <a href="https://uicookies.com/" target="_blank">uicookies.com</a> Demo Images: Unsplash</small>
          </p>
          
        </div>
      </div>-->

     
     
    </div>
  </footer>
  <!-- END: footer -->
  <input id="result" type="hidden">

  <input type="hidden" id="goods" value="">
  <input type="hidden" id="discount" value="">
  <input type="hidden" id="quantity" value="">
  <input type="hidden" id="discountPrice" value="">
  <input type="hidden" id="totalprice" value="">
  <input type="hidden" id="invoicedate" value="">
  <input type="hidden" id="duedate" value="">
  <input type="hidden" id="to" value="">
  <input type="hidden" id="invoiceID" value="">
  <input type="hidden" id="unitprice" value="">

  <input type="hidden" id="invoiceid1" value="">
  <input type="hidden" id="goods1" value="">
  <input type="hidden" id="to1" value="">
  <input type="hidden" id="unitprice1" value="">
  <input type="hidden" id="totalprice1" value="">
  <input type="hidden" id="quantity1" value="">
  <input type="hidden" id="invoicedate1" value="">
  <input type="hidden" id="duedate1" value="">
  <input type="hidden" id="discount1" value="">
  <input type="hidden" id="discountprice1" value="">

  <script src="js/scripts.min.js"></script>
  <script src="js/main.min.js"></script>
  <script src="js/custom.js"></script>


  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script type="text/javascript">

    $(document).ready(function () {
      $("#ps").hide();
      $("#ps1").hide();
      $("#ps2").hide();
      $('#showbtnfnce').hide();
      $('#shwcheks').hide();
      $('#invoiceid').click(function () {
        // $("#ps").hide();
        $("#ps").toggle();
        $("#ps1").toggle();
        $("#ps2").toggle();
      })

      var datastring = {
        "to": "micro pvt ltd"
      }
      $.ajax({
        url: 'http://172.16.12.46:3000/getInvoiceDetails',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(datastring),
        success: function (response) {

          var msg = [];
          //var obj = JSON.stringify(response.message);
          //   var discount = obj.goods;
          msg = response.message
          console.log("message " + JSON.stringify(msg));
          var no = 0;

          var row = "";
          $.each(msg, function () {


            $("#goods").val(this.goods);
            $("#discount").val(this.discount);
            $("#discountPrice").val(this.discountPrice);
            $("#quantity").val(this.quantity);
            $("#totalprice").val(this.totalprice);
            $("#invoicedate").val(this.invoicedate);
            $("#duedate").val(this.duedate);
            $("#to").val(this.to);
            $("#unitprice").val(this.unitprice);
            $("#invoiceID").val(this.invoiceID);
           // $("#invoiceID").val(this.goods);
            no++;
            row += '<tr style="hover background-color: #ffa;"><td style="border: none;text-align: left;padding: 8px;color:black" id="srno">' + this.invoiceID + '</td>'
            row += '<td style="border: none;text-align: left;padding: 8px;color:black" id="status">' + this.status + '</td>'
            row += '<td style="border: none;text-align: left;padding: 8px;color:black" id="colid"><a href="financedetails.html" style="color:green">see here</a></td>'
           
            if(this.status == "approved" ){
            console.log("in if ")
            $('#showbtnfnce').show();
            $('#shwcheks').show();
            $('#invoiceid1').val(this.invoiceID);
                          $('#goods1').val(this.goods);
                          $('#unitprice1').val(this.unitprice);
                          $('#totalprice1').val(this.totalprice);
                          $('#to1').val(this.to);
                          $('#quantity1').val(this.quantity);
                          $('#invoicedate1').val(this.invoicedate);
                          $('#duedate1').val(this.duedate);
                          $('#discount1').val(this.discount);
                          $('#discountprice1').val(this.discountPrice);
            row +=' <td style="border: none;text-align: left;padding: 8px;color:white" id="showbtnfnce"><button id="finceRels" style="color: black">Finance Released</button></td>'
          }
          
          
          row += '</tr>'
            
          });
          $(row).appendTo('#finance-table ');
          $('#finance-table a').click(function (e) {
           // e.preventDefault()
               $("#result").val($(this).closest('tr').find('td:first').text());
               var id= $("#result").val();
                  console.log(id);
                 localStorage.setItem("invoiceid", id);
          })

$('#finceRels').click(function () {

        var datastr = {
          "invoiceID": $('#invoiceid1').val(),
          "goods": $('#goods1').val(),
          "quantity": $('#quantity1').val(),
          "discount": $('#discount1').val(),
          "discountPrice": $('#discountprice1').val(),
          "totalPrice": $('#totalprice1').val(),
          "dueDate": $('#duedate1').val(),
          "invoiceDate": $('#invoicedate1').val(),
          "to": $('#to1').val(),
          "unitPrice": $('#unitprice1').val(),
          "status": "approved"
        }
        console.log(JSON.stringify(datastr))

        $.ajax({
          url: 'http://172.16.12.46:3000/financeInvoice',
          type: 'POST',
          contentType: 'application/json',
          data: JSON.stringify(datastr),
          success: function (response) {
            //var obj = JSON.parse(response.message.message);
            console.log("message--++ " + JSON.stringify(response.message));
            if (response.message == "Successfully committed the change to the ledger by the peer") 
            {
              window.location.reload(true);
              location.reload();
            }
          },
          error: function (response) {
            console.log('DEBUG: GET Enquiries Failed');
            console.log("Error Message: ", response.message);
          }

        });


      });


        },
          error: function (response) {
            console.log('DEBUG: GET Enquiries Failed');
            console.log("Error Message: ", response.message);
          }

        });
          
          



      // $('#finceRels').click(function () {

      //   var datastr = {
      //     "invoiceID": $('#invoiceid').text(),
      //     "goods": $('#goods').val(),
      //     "quantity": $('#quantity').val(),
      //     "discount": $('#discount').val(),
      //     "discountPrice": $('#discountPrice').val(),
      //     "totalPrice": $('#totalprice').val(),
      //     "dueDate": $('#duedate').val(),
      //     "invoiceDate": $('#invoicedate').val(),
      //     "to": $('#to').val(),
      //     "unitPrice": $('#unitprice').val(),
      //     "status": "approved"
      //   }
      //   console.log(JSON.stringify(datastr))

      //   $.ajax({
      //     url: 'http://172.16.12.46:3000/financeInvoice',
      //     type: 'POST',
      //     contentType: 'application/json',
      //     data: JSON.stringify(datastr),
      //     success: function (response) {
      //       //var obj = JSON.parse(response.message.message);
      //       console.log("message--++ " + JSON.stringify(response.message));
      //       if (response.message == "Successfully committed the change to the ledger by the peer") { }
      //       {
      //         window.location.reload(true);
      //       }
      //     },
      //     error: function (response) {
      //       console.log('DEBUG: GET Enquiries Failed');
      //       console.log("Error Message: ", response.message);
      //     }

      //   });


      // });


    });

  </script>

</body>

</html>