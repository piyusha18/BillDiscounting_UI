<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>uiCookies:Sublime &mdash; Free Bootstrap Theme, Free Responsive Bootstrap Website Template</title>
    <meta name="description" content="Free Bootstrap Theme by uicookies.com">
    <meta name="keywords" content="free website templates, free bootstrap themes, free template, free bootstrap, free website template">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   
   
             
    <link rel="stylesheet" href="css/styles-merged.css">
    <link rel="stylesheet" href="css/style.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500" rel="stylesheet"> 

    <!--[if lt IE 9]>
      <script src="js/vendor/html5shiv.min.js"></script>
      <script src="js/vendor/respond.min.js"></script>
    <![endif]-->
  
  </head>
  <body>
    


  <!-- START: header -->
  <header role="banner" class="probootstrap-header">
    <div class="container-fluid">
      <!-- <div class="row"> -->
        <a href="index.html" class="probootstrap-logo"><img src="img/nelito.jpeg" alt="Nelito"  height="30" width="70"><span></span></a>
        
        <a href="#" class="probootstrap-burger-menu visible-xs" ><i>Menu</i></a>
        <div class="mobile-menu-overlay"></div>

        <nav role="navigation" class="probootstrap-nav hidden-xs">
          <ul class="probootstrap-main-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="blog.html">Blog</a></li>
           <!-- <li><a href="pricing.html">Pricing</a></li>-->
            <li><a href="tour.html">About us</a></li>
           <!-- <li><a href="login.html">Log in</a></li>-->
             <li class="probootstrap-cta"><a href="#">Hello ,Investor</a></li>
          </ul>
          <div class="extra-text visible-xs">
            <a href="#" class="probootstrap-burger-menu"><i>Menu</i></a>
            <h5>Social</h5>
            <ul class="social-buttons">
              <li><a href="#"><i class="icon-twitter"></i></a></li>
              <li><a href="#"><i class="icon-facebook"></i></a></li>
              <li><a href="#"><i class="icon-instagram2"></i></a></li>
            </ul>
            <p><small>&copy; Copyright 2017. All Rights Reserved.</small></p>
          </div>
        </nav>

        <section class="probootstrap-intro">
          <div class="container">
 
                <div class="row">
                    <div class="col-md-6 col-md-offset-3">
                        <div class="probootstrap-form probootstrap-form-box" style="box-shadow: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);border-radius: 25px">
                        <h2 style="margin-top: -20px;font-weight: 1500px;font-family: 'Times New Roman', Times, serif">Invoice Form</h2>
                        <div class="form-group">
                            <label for="myid"style="" >Invoice ID</label>
                            <input type="text" id="myid" style="margin-left: 60px;width:210px;border-radius: 10px" disabled>
                        </div>
                        <div class="form-group">
                            <label for="mydate" style="margin-left: -15px">Invoice date  </label>
                            <input type="text" name="mydate" id="mydate" style="margin-left: 60px;width:210px;border-radius: 10px" disabled>
                        </div>
                        <div class="form-group">
                            <label for="duedate" style="margin-left: -15px">Due date </label>
                            <input type="text" name="duedate" id="duedate" style="margin-left: 80px;width:210px;border-radius: 10px" disabled>
                        </div>
                        <div class="form-group">
                             <label for="quantity">Quantity &nbsp;&nbsp;</label>
                            <input type="text" name="quantity" id="quantity" style="margin-left: 60px;border-radius: 10px" disabled>     
                        </div>
                        <div class="form-group">
                          <label for="goods">Goods &nbsp;&nbsp;</label>
                         <input type="text" name="goods" id="goods" style="margin-left: 75px;border-radius: 10px" disabled>     
                         </div>
                        <div class="form-group">
                          <label for="unitprice">Unit Price</label>
                          <input type="text" name="unitprice" id="unitprice" style="margin-left: 55px;border-radius: 10px" disabled>
                        </div>
                        <div class="form-group">
                          <label for="totalamount">Total Price</label>
                          <input type="text" name="totalamount" id="totalamount" style="margin-left: 55px;border-radius: 10px" disabled>
                        </div>
                        <!-- <div class="form-group">
                          <label for="from">From</label>
                          <input type="text" name="from" id="from" style="margin-left: 80px">
                        </div> -->
                        <div class="form-group">
                            <label for="to" >Buyer</label>
                            <input type="text" name="to" id="to" style="margin-left: 90px;border-radius: 10px" disabled>
                        </div>
                        <div class="form-group" id="dis1">
                            <label for="discount" >Discount</label>
                            <select name="discount" id="discount" style="margin-left: 70px;width: 200px;border-radius: 10px">
                                <option value="None">-- Select --</option>
                                <option value="10">10 %</option>
                                <option value="5">5 %</option>
                               
                             </select>
                             
                        </div>
                        <div class="form-group" id="dis2">
                            <label for="amountpaid">Discount amount:</label>
                            <input type="text" name="amountpaid" id="amountpaid" style="margin-left: 40px;border-radius: 10px" >
                        </div>

                        <div class="form-group" id="showdis1">
                          <label for="amountpaid">Discount :</label>
                          <input type="text" name="discount" id="discount1" style="margin-left: 40px;border-radius: 10px" disabled>
                      </div>
                      <div class="form-group" id="showdis2">
                        <label for="amountpaid">Discount amount:</label>
                        <input type="text" name="discountPrice" id="discountPrice" style="margin-left: 40px;border-radius: 10px" disabled>
                    </div>
                            
                        <div class="row form-group" style="margin-bottom: -20px">
                          <div class="col-sm-6">
                          <button id="submitform" class="btn btn-primary " data-toggle="modal" data-target="#myModal" >submit</button>
                        </div>
                        <div class="col-sm-6"></div>
                          <a role="button" href="financehome.html" class="btn btn-primary"  id="backbutton">back</a>
                        </div>
                        </div>
                        <div class="form-group" style="margin-bottom: -20px">
                       
                     
                    </div>
                  </div>
                    </div>
                  </div>
             
           
          </div>



 <!-- Modal -->
 <div class="modal fade" id="myModal" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        
      </div>
      <div class="modal-body">
        <p style="size: 18px"><b>Invoice details uploaded Sucessfully !!!</b></p>
      </div>
      <div class="modal-footer">
        <a role="button" href="financehome.html" class="btn btn-primary"  id="okbutton">Ok</a>
      </div>
    </div>
    
  </div>
</div>

        </section>

      <!-- </div> -->
    </div>
    
    
  </header>
  
  <!-- END: header -->
  
  <!-- START: footer -->
  <footer role="contentinfo" class="probootstrap-footer">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="probootstrap-footer-widget">
            <h3>About</h3>
            <p>Bill discounting is an arrangement whereby the seller recovers an amount of sales bill from the financial intermediaries before it is due. Such intermediaries charge a fee for the service. 
                From the other side, it is a business vertical for all types of financial intermediaries .</p>
            <p><a href="#" class="link-with-icon">Learn More <i class=" icon-chevron-right"></i></a></p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="probootstrap-footer-widget">
            <h3>Blog</h3>
            <ul class="probootstrap-blog-list">
              <li>
                <a href="#">
                  <figure><img src="img/fn.png" alt="Free Bootstrap Template by uicookies.com" class="img-responsive"></figure>
                  <div class="text">
                    <h4>what is invoice</h4>
                    <p>A small river named Duden flows by their place</p>
                  </div>
                </a>
              </li>
              <li>
                <a href="#">
                  <figure><img src="img/br.png" alt="Free Bootstrap Template by uicookies.com" class="img-responsive"></figure>
                  <div class="text">
                    <h4>Services</h4>
                    <p>A small river named Duden flows by their place</p>
                  </div>
                </a>
              </li>
              <li>
                <a href="#">
                  <figure><img src="img/seller.png" alt="Free Bootstrap Template by uicookies.com" class="img-responsive"></figure>
                  <div class="text">
                    <h4>how to do transaction ?</h4>
                    <p>A small river named Duden flows by their place</p>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-4">
          <div class="probootstrap-footer-widget">
            <h3>Contact</h3>
            <ul class="probootstrap-contact-info">
              <li><i class="icon-location2"></i> <span>MBP, Mahape,navi mumbai, maharashtra</span></li>
              <li><i class="icon-mail"></i><span>info@nelito.com</span></li>
              <li><i class="icon-phone2"></i><span>+123 456 7890</span></li>
            </ul>
            
          </div>
        </div>
      </div>
      <!--<div class=amount"row mt40">
        <div class="camountol-md-12 text-center">
          <ul class="amountprobootstrap-footer-social">
            <li><a hramountef=""><i class="icon-twitter"></i></a></li>
            <li><a hramountef=""><i class="icon-facebook"></i></a></li>
            <li><a hramountef=""><i class="icon-instagram2"></i></a></li>
          </ul>amount
          <p>amount
            <small>&camountopy; 2017 <a href="https://uicookies.com/" target="_blank">uiCookies:Sublime</a>. All Rights Reserved. <br> Designed &amp; Developed by <a href="https://uicookies.com/" target="_blank">uicookies.com</a> Demo Images: Unsplash</small>
          </p>
          
        </div>
      </div>-->
    </div>
  </footer>
  <!-- END: footer -->



  <script src="js/scripts.min.js"></script>
  <script src="js/main.min.js"></script>
  <script src="js/custom.js"></script>


  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script type="text/javascript">
 // import 'babel-polyfill';

  $(document).ready(function(){
        $("#ps").hide();
        $("#dis1").show();
        $("#dis2").show();
        $("#showdis1").hide();
        $("#showdis2").hide();
  $('#invoiceid').click(function(){
   // $("#ps").hide();
      $("#ps").toggle();
  })

   var datastring={
          "to":"micro pvt ltd"
        }
        var totalprice = 0;
    $.ajax({
                    url:'http://172.16.12.46:3000/getInvoiceDetails',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(datastring),
                    success: function(response) {
                      
                      console.log("invoiceid----->>"+localStorage.getItem('invoiceid'));
                        var obj = response.message;
                       
                        console.log("message " +obj);
                        console.log("message " +JSON.stringify(obj));
                        var discount = obj.goods;
                        console.log(discount);
                        var invoiceID =localStorage.getItem('invoiceid');
                        for(var i=0 ;i<obj.length;i++){
                          if(obj[i].invoiceID == invoiceID){
                                if(obj[i].status =="financeReleased" || obj[i].status =="approvalPending" || obj[i].status =="rejected"){
                                  $("#dis1").hide();
                                 $("#dis2").hide(); 
                                 $("#showdis1").show();
                                  $("#showdis2").show(); 
                                  $('#submitform').hide();
                                  $('#myid').val(invoiceID)
                                  $('#unitprice').val(obj[i].unitprice)
                                  $('#totalamount').val(obj[i].totalprice);
                                  $('#goods').val(obj[i].goods);
                                  $('#to').val(obj[i].to);
                                  $('#mydate').val(obj[i].invoicedate)
                                  $('#duedate').val(obj[i].duedate);
                                  $('#quantity').val(obj[i].quantity);
                                  $('#discount1').val(obj[i].discount);
                                  $('#discountPrice').val(obj[i].discountPrice);
                            }else{
                              $('#shwbtn').show();
                                $('#shwcheck').show();
                                  $('#myid').val(invoiceID)
                                  $('#unitprice').val(obj[i].unitprice)
                                  $('#totalamount').val(obj[i].totalprice);
                                  $('#goods').val(obj[i].goods);
                                  $('#to').val(obj[i].to);
                                  $('#mydate').val(obj[i].invoicedate)
                                  $('#duedate').val(obj[i].duedate);
                                  $('#quantity').val(obj[i].quantity);
                            }
                          }
                        }
                        var totalprice =obj.totalprice;
                        

                         var discount= $('#discount').val();
                     // console.log( $('#discount').val());

                       totalprice = $('#totalamount').val();
                     //  console.log("totalprice " +totalprice);
                    }, 
                    async:false,     
                   error: function(response) {
                       console.log('DEBUG: GET Enquiries Failed');
                       console.log("Error Message: ", response.message);
                   }
                    
            });
            var totalprice = $('#totalamount').val();
             console.log("totalprice out " +totalprice);
            $('#discount').change(function() {
              var discount= $('#discount').val();
             console.log(discount);
             var paid = Math.floor(totalprice *(discount /100));
             var totalpaid =totalprice - paid ;
             console.log("totalpaid " +totalpaid);
         $('#amountpaid').val(totalpaid);
    }).change(); //


 $('#submitform').click(function(){
  // $('#discount').change(function() {
  var discount= $('#discount').val();
             console.log("in",discount);
            // }).change();
 var datastr= {
  "invoiceID":  $('#myid').val(),
  "goods":$('#goods').val(),
  "quantity":  $('#quantity').val(),           
  "discount":discount,
  "discountPrice": $('#amountpaid').val(),
  "totalPrice":  $('#totalamount').val(),
  "dueDate":  $('#duedate').val(),
  "invoiceDate":$('#mydate').val(),
  "to": $('#to').val(),
  "unitPrice": $('#unitprice').val(),
  "status": "invoiceRaised"
}
console.log("strr---->",JSON.stringify(datastr))

          $.ajax({
                    url:'http://172.16.12.46:3000/financeInvoice',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(datastr),
                    success: function(response) {
                        //var obj = JSON.parse(response.message.message);
                        console.log("message--++ " +JSON.stringify(response.message));
                        if(response.message == "Successfully committed the change to the ledger by the peer")
                        {
                          
                        }
                    }, 
                   error: function(response) {
                       console.log('DEBUG: GET Enquiries Failed');
                       console.log("Error Message: ", response.message);
                   }
                    
            });

  })


   
});

  </script>
  
  </body>
</html>